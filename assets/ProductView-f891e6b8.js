import{T as H}from"./toast-d641e51e.js";import{_ as j,r as P,o as _,d as v,h as y,k as S,F as V,p as R,H as O,e as a,m as z,b as F,t as g,i as L,j as G,q as Y,w as X,f as $,s as J}from"./index-340e173e.js";import{c as N}from"./cart-08017af5.js";import{g as K,i as Q,e as W,n as B,b as D,N as Z,S as w,a as ee,R as te}from"./RecommendSwiper-4ee5c3d3.js";import{_ as se}from"./logo-lg-92d4c36a.js";import"./sweetalert2.all-e1e7afba.js";function oe({swiper:e,extendParams:u,on:f}){u({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let x=!1,o=!1;e.thumbs={swiper:null};function M(){const t=e.thumbs.swiper;if(!t||t.destroyed)return;const s=t.clickedIndex,n=t.clickedSlide;if(n&&n.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof s>"u"||s===null)return;let l;t.params.loop?l=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10):l=s,e.params.loop?e.slideToLoop(l):e.slideTo(l)}function p(){const{thumbs:t}=e.params;if(x)return!1;x=!0;const s=e.constructor;if(t.swiper instanceof s)e.thumbs.swiper=t.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update();else if(Q(t.swiper)){const n=Object.assign({},t.swiper);Object.assign(n,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new s(n),o=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",M),!0}function d(t){const s=e.thumbs.swiper;if(!s||s.destroyed)return;const n=s.params.slidesPerView==="auto"?s.slidesPerViewDynamic():s.params.slidesPerView;let l=1;const c=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(l=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(l=1),l=Math.floor(l),s.slides.forEach(r=>r.classList.remove(c)),s.params.loop||s.params.virtual&&s.params.virtual.enabled)for(let r=0;r<l;r+=1)W(s.slidesEl,`[data-swiper-slide-index="${e.realIndex+r}"]`).forEach(m=>{m.classList.add(c)});else for(let r=0;r<l;r+=1)s.slides[e.realIndex+r]&&s.slides[e.realIndex+r].classList.add(c);const T=e.params.thumbs.autoScrollOffset,I=T&&!s.params.loop;if(e.realIndex!==s.realIndex||I){const r=s.activeIndex;let m,i;if(s.params.loop){const E=s.slides.filter(k=>k.getAttribute("data-swiper-slide-index")===`${e.realIndex}`)[0];m=s.slides.indexOf(E),i=e.activeIndex>e.previousIndex?"next":"prev"}else m=e.realIndex,i=m>e.previousIndex?"next":"prev";I&&(m+=i==="next"?T:-1*T),s.visibleSlidesIndexes&&s.visibleSlidesIndexes.indexOf(m)<0&&(s.params.centeredSlides?m>r?m=m-Math.floor(n/2)+1:m=m+Math.floor(n/2)-1:m>r&&s.params.slidesPerGroup,s.slideTo(m,t?0:void 0))}}f("beforeInit",()=>{const{thumbs:t}=e.params;if(!(!t||!t.swiper))if(typeof t.swiper=="string"||t.swiper instanceof HTMLElement){const s=K(),n=()=>{const c=typeof t.swiper=="string"?s.querySelector(t.swiper):t.swiper;if(c&&c.swiper)t.swiper=c.swiper,p(),d(!0);else if(c){const T=I=>{t.swiper=I.detail[0],c.removeEventListener("init",T),p(),d(!0),t.swiper.update(),e.update()};c.addEventListener("init",T)}return c},l=()=>{if(e.destroyed)return;n()||requestAnimationFrame(l)};requestAnimationFrame(l)}else p(),d(!0)}),f("slideChange update resize observerUpdate",()=>{d()}),f("setTransition",(t,s)=>{const n=e.thumbs.swiper;!n||n.destroyed||n.setTransition(s)}),f("beforeDestroy",()=>{const t=e.thumbs.swiper;!t||t.destroyed||o&&t.destroy()}),Object.assign(e.thumbs,{init:p,update:d})}function ie({swiper:e,extendParams:u,emit:f,once:x}){u({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function o(){const d=e.getTranslate();e.setTranslate(d),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function M(){const{touchEventsData:d,touches:t}=e;d.velocities.length===0&&d.velocities.push({position:t[e.isHorizontal()?"startX":"startY"],time:d.touchStartTime}),d.velocities.push({position:t[e.isHorizontal()?"currentX":"currentY"],time:B()})}function p({currentPos:d}){const{params:t,wrapperEl:s,rtlTranslate:n,snapGrid:l,touchEventsData:c}=e,I=B()-c.touchStartTime;if(d<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(d>-e.maxTranslate()){e.slides.length<l.length?e.slideTo(l.length-1):e.slideTo(e.slides.length-1);return}if(t.freeMode.momentum){if(c.velocities.length>1){const h=c.velocities.pop(),b=c.velocities.pop(),q=h.position-b.position,U=h.time-b.time;e.velocity=q/U,e.velocity/=2,Math.abs(e.velocity)<t.freeMode.minimumVelocity&&(e.velocity=0),(U>150||B()-h.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=t.freeMode.momentumVelocityRatio,c.velocities.length=0;let r=1e3*t.freeMode.momentumRatio;const m=e.velocity*r;let i=e.translate+m;n&&(i=-i);let E=!1,k;const C=Math.abs(e.velocity)*20*t.freeMode.momentumBounceRatio;let A;if(i<e.maxTranslate())t.freeMode.momentumBounce?(i+e.maxTranslate()<-C&&(i=e.maxTranslate()-C),k=e.maxTranslate(),E=!0,c.allowMomentumBounce=!0):i=e.maxTranslate(),t.loop&&t.centeredSlides&&(A=!0);else if(i>e.minTranslate())t.freeMode.momentumBounce?(i-e.minTranslate()>C&&(i=e.minTranslate()+C),k=e.minTranslate(),E=!0,c.allowMomentumBounce=!0):i=e.minTranslate(),t.loop&&t.centeredSlides&&(A=!0);else if(t.freeMode.sticky){let h;for(let b=0;b<l.length;b+=1)if(l[b]>-i){h=b;break}Math.abs(l[h]-i)<Math.abs(l[h-1]-i)||e.swipeDirection==="next"?i=l[h]:i=l[h-1],i=-i}if(A&&x("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(n?r=Math.abs((-i-e.translate)/e.velocity):r=Math.abs((i-e.translate)/e.velocity),t.freeMode.sticky){const h=Math.abs((n?-i:i)-e.translate),b=e.slidesSizesGrid[e.activeIndex];h<b?r=t.speed:h<2*b?r=t.speed*1.5:r=t.speed*2.5}}else if(t.freeMode.sticky){e.slideToClosest();return}t.freeMode.momentumBounce&&E?(e.updateProgress(k),e.setTransition(r),e.setTranslate(i),e.transitionStart(!0,e.swipeDirection),e.animating=!0,D(s,()=>{!e||e.destroyed||!c.allowMomentumBounce||(f("momentumBounce"),e.setTransition(t.speed),setTimeout(()=>{e.setTranslate(k),D(s,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(f("_freeModeNoMomentumRelease"),e.updateProgress(i),e.setTransition(r),e.setTranslate(i),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,D(s,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(i),e.updateActiveIndex(),e.updateSlidesClasses()}else if(t.freeMode.sticky){e.slideToClosest();return}else t.freeMode&&f("_freeModeNoMomentumRelease");(!t.freeMode.momentum||I>=t.longSwipesMs)&&(e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:o,onTouchMove:M,onTouchEnd:p}})}const ne={props:["imageUrl","imagesUrl"],data(){return{thumbsSwiper:null,modules:[ie,Z,oe]}},methods:{setThumbsSwiper(e){this.thumbsSwiper=e}},components:{Swiper:w,SwiperSlide:ee}},ae={class:"col-12 col-md-6 col-lg-5"},le=["src","alt"],re=["src","alt"];function ce(e,u,f,x,o,M){const p=P("swiper-slide"),d=P("swiper");return _(),v("div",ae,[y(d,{loop:!0,spaceBetween:10,navigation:!0,thumbs:{swiper:o.thumbsSwiper},modules:o.modules,class:"swiper product-img-swiper mySwiper2"},{default:S(()=>[(_(!0),v(V,null,R(f.imagesUrl,t=>(_(),O(p,{key:t},{default:S(()=>[a("img",{class:"img-fluid",src:t,alt:t},null,8,le)]),_:2},1024))),128))]),_:1},8,["thumbs","modules"]),y(d,{onSwiper:M.setThumbsSwiper,loop:!0,spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesProgress:!0,modules:o.modules,class:"swiper product-imgs-swiper mySwiper"},{default:S(()=>[(_(!0),v(V,null,R(f.imagesUrl,t=>(_(),O(p,{key:t},{default:S(()=>[a("img",{class:"img-fluid",src:t,alt:t},null,8,re)]),_:2},1024))),128))]),_:1},8,["onSwiper","modules"])])}const de=j(ne,[["render",ce]]),{VITE_API:ue,VITE_APIPATH:me}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"project-sourire-api",BASE_URL:"/project-sourire/",MODE:"production",DEV:!1,PROD:!0},fe={data(){return{product:{},qty:1,isLoading:!1,allImagesUrl:[]}},methods:{...z(N,["addCart"]),getProduct(){this.isLoading=!0;const{id:e}=this.$route.params;this.$http.get(`${ue}/api/${me}/product/${e}`).then(u=>{var f;this.product=u.data.product,this.isLoading=!1,this.allImagesUrl=((f=u.data.product.imagesUrl)==null?void 0:f.length)>0?[u.data.product.imageUrl,u.data.product.imagesUrl]:[u.data.product.imageUrl]}).catch(u=>{H(u.response.data.message,"error"),this.isLoading=!1})}},components:{ProductThumbsSwiper:de,RecommendSwiper:te},mounted(){this.getProduct()},computed:{...F(N,["loadingItem"])}},he=a("img",{class:"img-fluid loading-img animate__animated animate__shakeY",src:se,alt:"logo"},null,-1),pe={class:"bg-background py-5"},be={class:"container product"},_e={class:"row"},ge={key:0,class:"col-12 col-md-6 col-lg-7"},ve={"aria-label":"breadcrumb"},Te={class:"breadcrumb"},ye={class:"breadcrumb-item"},Se={class:"breadcrumb-item"},xe={class:"breadcrumb-item"},Me={class:"text-dark"},Ie={class:"fw-bold"},ke={class:"mb-3"},Pe=["innerHTML"],Ee={key:0,class:"fs-3 mb-3"},Ce={key:1,class:"fs-3 mb-3"},Ve={class:"text-gray-dark fw-normal fs-4 me-2"},Ae={class:"input-group gap-3 gap-lg-0"},Le=["value"],Be=["disabled"],De=J('<section class="bg-white py-5"><div class="container"><h2 class="mb-3">購買須知</h2><ul class="list-unstyled d-flex flex-column gap-2 mb-0"><li><p class="mb-0">※本商品由天然花材手工製作而成，因此外觀可能會稍有不同。</p></li><li><p class="mb-0">※因為天然花材、拍攝或螢幕解析等原因，商品的色差可能會有所不同，請以實物為準。</p></li><li><p class="mb-0">※尺寸可能會因為製作或測量手法的不同而有1~2公分的誤差，屬於正常範圍。</p></li><li><p class="mb-0">※若因為季節性或其他不可抗力因素導致花材短缺，我們會更換等價的花材，不會另行通知。</p></li></ul></div></section><section class="bg-white py-5"><div class="container"><h2 class="mb-3">心意傳遞，讓花語說出您的心聲</h2><p class="mb-0">除了精選的花材與精心的包裝，我們也提供個人化的花卡，</p><p>讓您能夠用簡短的文字傳達您的情感，讓您的愛與祝福傳遞到對方心中。</p><p class="mb-0">若您需要花卡服務，請與我們聯繫，告知您想傳達的話語，</p><p>我們會為您印製出專屬的花卡，讓您的心意更加完整地呈現。</p></div></section>',2),Re={class:"bg-background py-5"},Ue={class:"container"},Oe=a("h2",{class:"fw-bold text-center mb-4 mb-lg-5"},"精選花束",-1);function Ne(e,u,f,x,o,M){const p=P("VueLoading"),d=P("ProductThumbsSwiper"),t=P("RouterLink"),s=P("RecommendSwiper");return _(),v(V,null,[y(p,{active:o.isLoading},{default:S(()=>[he]),_:1},8,["active"]),a("main",null,[a("section",pe,[a("div",be,[a("div",_e,[y(d,{imagesUrl:o.allImagesUrl},null,8,["imagesUrl"]),o.product.id?(_(),v("div",ge,[a("nav",ve,[a("ol",Te,[a("li",ye,[y(t,{class:"text-gray-dark p-1 p-lg-2 hover-primary",to:"/"},{default:S(()=>[L(" 首頁 ")]),_:1})]),a("li",Se,[y(t,{class:"text-gray-dark p-1 p-lg-2 hover-primary",to:"/products"},{default:S(()=>[L(" 購買花禮 ")]),_:1})]),a("li",xe,[a("span",Me,g(o.product.set+o.product.title),1)])])]),a("h2",Ie,g(o.product.set+o.product.title),1),a("h3",ke,g(o.product.subTitle),1),a("p",null,g(o.product.content),1),a("p",{class:"mb-5",innerHTML:o.product.description},null,8,Pe),o.product.price===o.product.origin_price?(_(),v("p",Ee,g(`NT$ ${o.product.origin_price}`),1)):(_(),v("p",Ce,[a("del",Ve,g(`NT$ ${o.product.origin_price}`),1),L(g(`NT$ ${o.product.price}`),1)])),a("div",Ae,[G(a("select",{class:"form-select","onUpdate:modelValue":u[0]||(u[0]=n=>o.qty=n)},[(_(),v(V,null,R(20,n=>a("option",{value:n,key:`${n}_qty`},g(n),9,Le)),64))],512),[[Y,o.qty,void 0,{number:!0}]]),a("button",{type:"button",class:"btn btn-primary py-3 px-5 text-dark-gray link-width",onClick:u[1]||(u[1]=X(n=>e.addCart(o.product.id,o.qty),["prevent"])),disabled:o.product.id===e.loadingItem,style:{"z-index":"1"}}," 加入購物車 ",8,Be)])])):$("",!0)])])]),De,a("section",Re,[a("div",Ue,[Oe,y(s)])])])],64)}const Ye=j(fe,[["render",Ne]]);export{Ye as default};
