import{l as i,n as r}from"./index-340e173e.js";import{T as e}from"./toast-d641e51e.js";const{VITE_API:c,VITE_APIPATH:o}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"project-sourire-api",BASE_URL:"/project-sourire/",MODE:"production",DEV:!1,PROD:!0},n=i("cart",{state:()=>({cart:{},cartNum:0,loadingItem:""}),actions:{getCart(){r.get(`${c}/api/${o}/cart`).then(t=>{this.cart=t.data.data,this.cartNum=t.data.data.carts.reduce((a,s)=>a+s.qty,0)}).catch(t=>e(t.response.data.message,"error"))},addCart(t,a=1){this.loadingItem=t,r.post(`${c}/api/${o}/cart`,{data:{product_id:t,qty:a}}).then(s=>{this.getCart(),e(s.data.message,"success"),this.loadingItem=""}).catch(s=>e(s.response.data.message,"error"))},delCart(t){this.loadingItem=t,r.delete(`${c}/api/${o}/cart/${t}`).then(a=>{this.getCart(),e(a.data.message,"success")}).catch(a=>e(a.response.data.message,"error"))},delCars(){r.delete(`${c}/api/${o}/carts`).then(t=>{this.getCart(),e(t.data.message,"success"),this.loadingItem=""}).catch(t=>e(t.response.data.message,"error"))},updateCart(t){this.loadingItem=t.id,r.put(`${c}/api/${o}/cart/${t.id}`,{data:{product_id:t.product_id,qty:t.qty}}).then(a=>{this.getCart(),e(a.data.message,"success"),this.loadingItem=""}).catch(a=>e(a.response.data.message,"error"))}}});export{n as c};
