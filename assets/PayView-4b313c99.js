import{T as d}from"./toast-77d67ba4.js";import{_ as g}from"./logo-lg-92d4c36a.js";import{_ as y,r as f,o as n,d as c,h as k,k as v,e as s,I as h,i as r,f as a,t as o,F as m,p as x}from"./index-0c62bcd8.js";import"./sweetalert2.all-0b553f6e.js";const{VITE_API:p,VITE_APIPATH:u}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"project-sourire-api",BASE_URL:"/project-sourire/",MODE:"production",DEV:!1,PROD:!0},w={data(){return{isLoading:!1,order:{}}},methods:{getOrder(){this.isLoading=!0;const{orderId:i}=this.$route.params;this.$http.get(`${p}/api/${u}/order/${i}`).then(e=>{this.order=e.data.order,this.isLoading=!1}).catch(e=>{d(e.response.data.message,"error"),this.isLoading=!1})},payOrder(){this.isLoading=!0;const{orderId:i}=this.$route.params;this.$http.post(`${p}/api/${u}/pay/${i}`).then(e=>{d(e.data.message,"success"),this.getOrder(),this.isLoading=!1}).catch(e=>{d(e.response.data.message,"error"),this.isLoading=!1})}},mounted(){this.getOrder()}},T=s("img",{class:"img-fluid loading-img animate__animated animate__shakeY",src:g,alt:"logo"},null,-1),E={class:"bg-background py-5 min-height"},L={class:"container"},V={class:"row row-cols-3 list-unstyled mb-5 text-center"},I=s("li",{class:"col"},[s("p",{class:"mb-0 border border-gray-dark m-2 p-3"},[r("STEP 1"),s("br"),r("建立"),s("br",{class:"d-block d-lg-none"}),r("訂單")])],-1),P={class:"col"},O=s("br",null,null,-1),A=s("br",{class:"d-block d-lg-none"},null,-1),$={class:"col"},C=s("br",null,null,-1),N=s("br",{class:"d-block d-lg-none"},null,-1),S={key:0,class:"d-flex flex-column justify-content-center align-items-center mb-4"},B=s("h2",null,"訂購成功，感謝您的訂購",-1),D=s("p",null,"花禮均需要時間進行製作，製作天數約3~5天不等",-1),F={class:"row"},j={class:"col-12 col-lg-6 p-5"},U={class:"table table-hover align-middle text-center text-gray-dark"},H=s("thead",null,[s("tr",null,[s("th",{colspan:"2"},"商品"),s("th",null,"數量"),s("th",null,"小計")])],-1),R=["src","alt"],q={class:"small mb-2 text-start"},z=s("br",null,null,-1),M=s("hr",null,null,-1),Y={key:0,class:"fs-5 text-end fw-bold"},G={key:0,class:"col-12 col-lg-6 bg-white p-5"},J=s("h2",null,"訂購資訊",-1),K={class:"row my-3"},Q=s("p",{class:"col-4 mb-0"},"Email",-1),W={class:"col-8 mb-0"},X={class:"row my-3"},Z=s("p",{class:"col-4 mb-0"},"收件人姓名",-1),ss={class:"col-8 mb-0"},ts={class:"row my-3"},es=s("p",{class:"col-4 mb-0"},"電話",-1),os={class:"col-8 mb-0"},rs={class:"row my-3"},ls=s("p",{class:"col-4 mb-0"},"收件人地址",-1),is={class:"col-8 mb-0"},ns={class:"row my-3"},cs=s("p",{class:"col-4 mb-0"},"留言",-1),as={class:"col-8 mb-0"},ds={key:0,class:"col-12 mt-5"};function _s(i,e,hs,ms,t,_){const b=f("VueLoading");return n(),c(m,null,[k(b,{active:t.isLoading},{default:v(()=>[T]),_:1},8,["active"]),s("main",null,[s("section",E,[s("div",L,[s("ul",V,[I,s("li",P,[s("p",{class:h(`mb-0 m-2 p-3 ${t.order.is_paid?"border border-gray-dark":"mb-0 bg-gray-dark text-white"}`)},[r("STEP 2"),O,r("進行"),A,r("結帳")],2)]),s("li",$,[s("p",{class:h(`mb-0 m-2 p-3 ${t.order.is_paid?"mb-0 bg-gray-dark text-white":"border border-gray-dark"}`)},[r("STEP 3"),C,r("訂單"),N,r("完成")],2)])]),t.order.is_paid?(n(),c("div",S,[B,D,s("button",{type:"button",class:"btn btn-primary py-3 px-5 text-gray-dark",onClick:e[0]||(e[0]=l=>i.$router.push("/products"))}," 再去晃晃吧 ")])):a("",!0),s("div",F,[s("div",j,[s("h2",null,o(t.order.is_paid?"訂購完成":"訂單內容"),1),s("table",U,[H,s("tbody",null,[(n(!0),c(m,null,x(t.order.products,l=>(n(),c("tr",{key:l.id},[s("td",null,[s("img",{class:"cart-img",src:l.product.imageUrl,alt:l.product.imageUrl},null,8,R)]),s("td",null,[s("p",q,[r(o(l.product.set),1),z,r(o(l.product.title),1)])]),s("td",null,o(l.qty),1),s("td",null,o(`NT$ ${i.$priceFormat.price(l.final_total)}`),1)]))),128))])]),M,t.order.total?(n(),c("p",Y,o(`總計金額：NT$ ${i.$priceFormat.price(t.order.total)}`),1)):a("",!0)]),t.order.user?(n(),c("div",G,[J,s("div",K,[Q,s("p",W,o(t.order.user.email),1)]),s("div",X,[Z,s("p",ss,o(t.order.user.name),1)]),s("div",ts,[es,s("p",os,o(t.order.user.tel),1)]),s("div",rs,[ls,s("p",is,o(t.order.user.address),1)]),s("div",ns,[cs,s("p",as,o(t.order.user.message),1)]),t.order.is_paid?a("",!0):(n(),c("div",ds,[s("button",{type:"button",class:"btn btn-primary py-3 px-5 text-gray-dark w-100",onClick:e[1]||(e[1]=(...l)=>_.payOrder&&_.payOrder(...l))}," 付款 ")]))])):a("",!0)])])])])],64)}const ys=y(w,[["render",_s]]);export{ys as default};
